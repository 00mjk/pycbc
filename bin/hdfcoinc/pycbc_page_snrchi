#!/usr/bin/python
""" Plot the rate of triggers across the template bank
"""
import matplotlib
matplotlib.use('Agg')
import numpy, argparse, h5py, os, pylab
    
def snr_to_chisq(snr, newsnr):
    return (((snr / newsnr) ** (6.0)) * 2.0 - 1.0) ** (1.0/3.0)  
    
parser = argparse.ArgumentParser()
parser.add_argument('--trigger-file')
parser.add_argument('--injection-file')
parser.add_argument('--injection-trigger-file')
parser.add_argument('--output-file')
args = parser.parse_args()
f = h5py.File(args.trigger_file)
snr = f['snr'][:]
chisq = f['chisq'][:]
pylab.scatter(snr, chisq, color='black', marker='o', label='background')

f = h5py.File(args.injection_file)
trigid1 = f['found_after_vetoes/trigger_id1'][:]
trigid2 = f['found_after_vetoes/trigger_id2'][:]
f = h5py.File(args.injection_trigger_file)
snr = f['snr'][:]
chisq = f['chisq'][:]

pylab.scatter(snr, chisq, color='red', marker='x')
pylab.xlim(5.5, 10)
pylab.ylim(150, 500)
pylab.savefig(args.output_file)



